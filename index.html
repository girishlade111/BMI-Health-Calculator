<!DOCTYPE html>
<html lang="en" class="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modern BMI & Health Metrics Calculator</title>
    <meta name="description" content="A modern, fast, user-friendly, and privacy-focused BMI (Body Mass Index) calculator web application with BMR and Daily Calorie Needs.">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        #particles-js {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
        }
        .theme-toggle-icon {
            transition: transform 0.3s ease-in-out;
        }
        /* Custom styles for the BMI gauge */
        .gauge-bg {
            stroke: #e5e7eb; /* slate-200 */
        }
        .dark .gauge-bg {
            stroke: #475569; /* slate-600 */
        }
        .gauge-meter {
            stroke: #3b82f6; /* blue-500 */
            transition: stroke-dashoffset 0.5s ease-out, stroke 0.3s ease-in-out;
            transform-origin: 50% 50%;
            transform: rotate(-90deg);
        }
        /* Tooltip styles */
        .tooltip {
            position: relative;
            display: inline-block;
        }
        .tooltip .tooltiptext {
            visibility: hidden;
            width: 220px;
            background-color: #334155; /* slate-700 */
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 8px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -110px;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 0.8rem;
            line-height: 1.4;
        }
        .dark .tooltip .tooltiptext {
             background-color: #f1f5f9; /* slate-100 */
             color: #1e293b; /* slate-800 */
        }
        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }
        /* UI Animations */
        .fade-in {
            animation: fadeInAnimation 0.6s ease-in-out forwards;
            opacity: 0;
        }
        .fade-in-delay { animation-delay: 0.2s; }
        .fade-in-delay-2 { animation-delay: 0.4s; }

        @keyframes fadeInAnimation {
            0% {
                opacity: 0;
                transform: translateY(15px);
            }
            100% {
                opacity: 1;
                transform: translateY(0);
            }
        }
        .interactive-element {
             transition: all 0.2s ease-in-out;
        }
        .interactive-element:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
         .dark .interactive-element:hover {
            box-shadow: 0 4px 20px rgba(0,0,0,0.25);
        }
    </style>
    <script>
        // Set theme from localStorage or system preference
        if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
          document.documentElement.classList.add('dark')
        } else {
          document.documentElement.classList.remove('dark')
        }
    </script>
</head>
<body class="bg-slate-50 dark:bg-slate-900 text-slate-600 dark:text-slate-300 transition-colors duration-300">
    
    <div id="particles-js"></div>

    <!-- Main Container -->
    <div class="relative min-h-screen container mx-auto px-4 py-8 md:py-12">

        <!-- Header -->
        <header class="flex justify-between items-center mb-8">
            <a href="./index.html" class="text-3xl md:text-4xl font-bold text-slate-900 dark:text-white hover:text-blue-600 dark:hover:text-blue-500 transition-colors">BMI & Health Calculator</a>
            <div class="flex items-center space-x-4">
                 <a href="./about.html" class="text-md font-medium text-blue-600 dark:text-blue-500 hover:underline">About Us</a>
                <button id="theme-toggle" class="p-2 rounded-full text-slate-500 dark:text-slate-400 hover:bg-slate-200 dark:hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-slate-50 dark:focus:ring-offset-slate-900 focus:ring-blue-500 interactive-element">
                    <svg id="theme-icon-light" class="h-6 w-6 theme-toggle-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" /></svg>
                    <svg id="theme-icon-dark" class="h-6 w-6 theme-toggle-icon hidden" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" /></svg>
                </button>
            </div>
        </header>

        <!-- Main Content Grid -->
        <main class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            
            <!-- Left Column: Inputs -->
            <div class="lg:col-span-1 bg-white dark:bg-slate-800 p-6 md:p-8 rounded-2xl shadow-lg h-fit fade-in">
                <h2 class="text-2xl font-bold text-slate-800 dark:text-slate-100 mb-6">Enter Your Details</h2>

                <!-- Unit System Toggle -->
                <div class="mb-6">
                    <div class="flex bg-slate-100 dark:bg-slate-700 rounded-lg p-1">
                        <button id="unit-metric" class="w-1/2 py-2 text-sm font-semibold rounded-md transition-colors">Metric</button>
                        <button id="unit-imperial" class="w-1/2 py-2 text-sm font-semibold rounded-md transition-colors">Imperial</button>
                    </div>
                </div>

                <!-- Input Fields -->
                <div class="space-y-4">
                    <!-- Age & Gender -->
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label for="age" class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1">Age</label>
                            <input type="number" id="age" value="25" min="2" max="100" class="w-full bg-slate-100 dark:bg-slate-700 border-transparent rounded-lg p-2 text-center text-slate-900 dark:text-white font-medium focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        </div>
                        <div>
                            <label for="gender" class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1">Gender</label>
                            <select id="gender" class="w-full bg-slate-100 dark:bg-slate-700 border-transparent rounded-lg p-2 text-center text-slate-900 dark:text-white font-medium focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                <option value="male">Male</option>
                                <option value="female">Female</option>
                            </select>
                        </div>
                    </div>
                    
                    <!-- Height -->
                    <div id="height-inputs">
                        <!-- Metric Height -->
                        <div id="metric-height">
                            <label for="cm" class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1">Height (cm)</label>
                            <input type="number" id="cm" value="180" class="w-full bg-slate-100 dark:bg-slate-700 border-transparent rounded-lg p-2 text-center text-slate-900 dark:text-white font-medium focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        </div>
                        <!-- Imperial Height -->
                        <div id="imperial-height" class="hidden grid-cols-2 gap-4">
                             <div>
                                <label for="ft" class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1">Height (ft)</label>
                                <input type="number" id="ft" class="w-full bg-slate-100 dark:bg-slate-700 border-transparent rounded-lg p-2 text-center text-slate-900 dark:text-white font-medium focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            </div>
                            <div>
                                <label for="in" class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1">(in)</label>
                                <input type="number" id="in" class="w-full bg-slate-100 dark:bg-slate-700 border-transparent rounded-lg p-2 text-center text-slate-900 dark:text-white font-medium focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            </div>
                        </div>
                    </div>

                    <!-- Weight -->
                    <div>
                        <label for="weight" id="weight-label" class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1">Weight (kg)</label>
                        <input type="number" id="weight" value="75" class="w-full bg-slate-100 dark:bg-slate-700 border-transparent rounded-lg p-2 text-center text-slate-900 dark:text-white font-medium focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    </div>
                    
                    <!-- Activity Level -->
                    <div>
                        <label for="activity" class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1">Activity Level</label>
                        <select id="activity" class="w-full bg-slate-100 dark:bg-slate-700 border-transparent rounded-lg p-2 text-slate-900 dark:text-white font-medium focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            <option value="1.2">Sedentary (little or no exercise)</option>
                            <option value="1.375">Lightly Active (1-3 days/week)</option>
                            <option value="1.55" selected>Moderately Active (3-5 days/week)</option>
                            <option value="1.725">Very Active (6-7 days a week)</option>
                            <option value="1.9">Extra Active (very hard exercise & physical job)</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- Right Column: Results -->
            <div class="lg:col-span-2 space-y-8">
                <!-- BMI Result -->
                <div class="bg-white dark:bg-slate-800 p-6 md:p-8 rounded-2xl shadow-lg fade-in fade-in-delay">
                    <div class="flex flex-col md:flex-row items-center justify-between gap-8">
                        <div class="text-center md:text-left">
                            <h3 class="text-lg font-semibold text-slate-700 dark:text-slate-200">Your BMI Score</h3>
                            <p id="bmi-score" class="text-5xl sm:text-6xl font-extrabold text-blue-600 dark:text-blue-500 my-2">23.1</p>
                            <p id="bmi-classification" class="font-semibold text-xl text-slate-800 dark:text-slate-100">Normal Weight</p>
                            <p id="healthy-weight-range" class="text-sm mt-3 text-slate-500 dark:text-slate-400">A healthy weight is between 60kg - 81kg.</p>
                        </div>
                        <div class="relative w-48 h-48 sm:w-56 sm:h-56">
                            <svg class="w-full h-full" viewBox="0 0 120 120">
                                <circle class="gauge-bg" cx="60" cy="60" r="54" fill="none" stroke-width="12"></circle>
                                <circle id="bmi-gauge" class="gauge-meter" cx="60" cy="60" r="54" fill="none" stroke-width="12" stroke-linecap="round"></circle>
                            </svg>
                        </div>
                    </div>
                </div>

                <!-- Additional Metrics -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                     <div class="bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-lg fade-in fade-in-delay-2">
                        <h3 class="font-semibold text-slate-700 dark:text-slate-200 flex items-center">
                            Basal Metabolic Rate (BMR)
                            <div class="tooltip ml-2">
                               <svg class="w-4 h-4 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                               <span class="tooltiptext">Your BMR is the number of calories your body needs to function at rest.</span>
                            </div>
                        </h3>
                        <p class="text-3xl font-bold text-slate-900 dark:text-white mt-2"><span id="bmr-result">1750</span> <span class="text-lg font-medium text-slate-500 dark:text-slate-400">calories/day</span></p>
                    </div>
                     <div class="bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-lg fade-in fade-in-delay-2">
                        <h3 class="font-semibold text-slate-700 dark:text-slate-200">Daily Calorie Needs (TDEE)</h3>
                        <p class="text-3xl font-bold text-slate-900 dark:text-white mt-2"><span id="tdee-result">2713</span> <span class="text-lg font-medium text-slate-500 dark:text-slate-400">calories/day</span></p>
                    </div>
                </div>

                <!-- Privacy Message -->
                 <div class="bg-emerald-50 dark:bg-emerald-900/50 border-l-4 border-emerald-400 dark:border-emerald-600 p-4 rounded-r-lg text-emerald-800 dark:text-emerald-200 fade-in fade-in-delay-2">
                    <p class="font-semibold">Your Privacy is Important</p>
                    <p class="text-sm">We do not save or share your personal data. All calculations are done in your browser.</p>
                </div>
            </div>
        </main>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- DOM ELEMENT SELECTION ---
            const unitMetricBtn = document.getElementById('unit-metric');
            const unitImperialBtn = document.getElementById('unit-imperial');
            const metricHeightDiv = document.getElementById('metric-height');
            const imperialHeightDiv = document.getElementById('imperial-height');
            const weightLabel = document.getElementById('weight-label');

            const ageInput = document.getElementById('age');
            const genderSelect = document.getElementById('gender');
            const cmInput = document.getElementById('cm');
            const ftInput = document.getElementById('ft');
            const inInput = document.getElementById('in');
            const weightInput = document.getElementById('weight');
            const activitySelect = document.getElementById('activity');

            const bmiScoreEl = document.getElementById('bmi-score');
            const bmiClassificationEl = document.getElementById('bmi-classification');
            const healthyWeightRangeEl = document.getElementById('healthy-weight-range');
            const bmrResultEl = document.getElementById('bmr-result');
            const tdeeResultEl = document.getElementById('tdee-result');
            const bmiGauge = document.getElementById('bmi-gauge');

            let currentUnit = 'metric';

            // --- UNIT SYSTEM LOGIC ---
            function setUnit(unit) {
                currentUnit = unit;
                if (unit === 'metric') {
                    unitMetricBtn.classList.add('bg-white', 'dark:bg-slate-900', 'text-slate-900', 'dark:text-white');
                    unitImperialBtn.classList.remove('bg-white', 'dark:bg-slate-900', 'text-slate-900', 'dark:text-white');
                    metricHeightDiv.classList.remove('hidden');
                    imperialHeightDiv.classList.add('hidden');
                    weightLabel.textContent = 'Weight (kg)';
                    convertImperialToMetric();
                } else {
                    unitImperialBtn.classList.add('bg-white', 'dark:bg-slate-900', 'text-slate-900', 'dark:text-white');
                    unitMetricBtn.classList.remove('bg-white', 'dark:bg-slate-900', 'text-slate-900', 'dark:text-white');
                    imperialHeightDiv.classList.remove('hidden');
                    metricHeightDiv.classList.add('hidden');
                    weightLabel.textContent = 'Weight (lbs)';
                    convertMetricToImperial();
                }
                calculateAll();
            }

            function convertMetricToImperial() {
                const cm = parseFloat(cmInput.value);
                if (!isNaN(cm)) {
                    const totalInches = cm / 2.54;
                    const feet = Math.floor(totalInches / 12);
                    const inches = (totalInches % 12).toFixed(1);
                    ftInput.value = feet;
                    inInput.value = inches;
                }
                const kg = parseFloat(weightInput.value);
                if (!isNaN(kg)) {
                    weightInput.value = (kg * 2.20462).toFixed(1);
                }
            }
            
            function convertImperialToMetric() {
                const ft = parseFloat(ftInput.value);
                const inches = parseFloat(inInput.value);
                if (!isNaN(ft) && !isNaN(inches)) {
                    cmInput.value = ((ft * 12 + inches) * 2.54).toFixed(1);
                }
                const lbs = parseFloat(weightInput.value);
                if (!isNaN(lbs)) {
                    weightInput.value = (lbs / 2.20462).toFixed(1);
                }
            }

            // --- CALCULATION LOGIC ---
            function calculateAll() {
                const age = parseFloat(ageInput.value);
                const gender = genderSelect.value;
                const activityMultiplier = parseFloat(activitySelect.value);

                let heightCm, weightKg;
                if (currentUnit === 'metric') {
                    heightCm = parseFloat(cmInput.value);
                    weightKg = parseFloat(weightInput.value);
                } else {
                    const ft = parseFloat(ftInput.value);
                    const inches = parseFloat(inInput.value);
                    heightCm = (ft * 12 + inches) * 2.54;
                    weightKg = parseFloat(weightInput.value) / 2.20462;
                }
                
                if (isNaN(heightCm) || isNaN(weightKg) || heightCm <= 0 || weightKg <= 0 || isNaN(age) || age <= 0) {
                    resetResults();
                    return;
                }

                // 1. BMI Calculation
                const heightM = heightCm / 100;
                const bmi = weightKg / (heightM * heightM);
                updateBMIUI(bmi, heightM);

                // 2. BMR Calculation (Mifflin-St Jeor)
                let bmr;
                if (gender === 'male') {
                    bmr = (10 * weightKg) + (6.25 * heightCm) - (5 * age) + 5;
                } else {
                    bmr = (10 * weightKg) + (6.25 * heightCm) - (5 * age) - 161;
                }
                bmrResultEl.textContent = Math.round(bmr);
                
                // 3. TDEE Calculation
                const tdee = bmr * activityMultiplier;
                tdeeResultEl.textContent = Math.round(tdee);
            }

            // --- UI UPDATE LOGIC ---
            function updateBMIUI(bmi, heightM) {
                if (isNaN(bmi) || !isFinite(bmi)) {
                    resetResults();
                    return;
                }
                bmiScoreEl.textContent = bmi.toFixed(1);
                
                let classification = '';
                let color = '#3b82f6'; // Default blue

                if (bmi < 18.5) {
                    classification = 'Underweight';
                    color = '#f59e0b'; // amber-500
                } else if (bmi >= 18.5 && bmi < 25) {
                    classification = 'Normal Weight';
                    color = '#22c55e'; // green-500
                } else if (bmi >= 25 && bmi < 30) {
                    classification = 'Overweight';
                    color = '#f59e0b'; // amber-500
                } else {
                    classification = 'Obesity';
                    color = '#ef4444'; // red-500
                }
                bmiClassificationEl.textContent = classification;
                bmiGauge.style.stroke = color;

                // Update Gauge
                const circumference = 2 * Math.PI * 54;
                const bmiRange = 40 - 15; // from BMI 15 to 40
                const bmiClamped = Math.max(15, Math.min(40, bmi));
                const percent = (bmiClamped - 15) / bmiRange;
                const offset = circumference * (1 - percent);
                bmiGauge.style.strokeDasharray = circumference;
                bmiGauge.style.strokeDashoffset = offset;

                // Healthy Weight Range Calculation
                const lowerWeight = 18.5 * (heightM * heightM);
                const upperWeight = 24.9 * (heightM * heightM);

                if(currentUnit === 'metric') {
                   healthyWeightRangeEl.textContent = `A healthy weight is between ${lowerWeight.toFixed(0)}kg - ${upperWeight.toFixed(0)}kg.`;
                } else {
                    healthyWeightRangeEl.textContent = `A healthy weight is between ${(lowerWeight * 2.20462).toFixed(0)}lbs - ${(upperWeight * 2.20462).toFixed(0)}lbs.`;
                }
            }
            
            function resetResults() {
                bmiScoreEl.textContent = '--';
                bmiClassificationEl.textContent = 'Enter your details';
                healthyWeightRangeEl.textContent = '';
                bmrResultEl.textContent = '----';
                tdeeResultEl.textContent = '----';
                updateBMIUI(0);
            }

            // --- EVENT LISTENERS ---
            unitMetricBtn.addEventListener('click', () => setUnit('metric'));
            unitImperialBtn.addEventListener('click', () => setUnit('imperial'));
            
            [ageInput, genderSelect, cmInput, ftInput, inInput, weightInput, activitySelect].forEach(el => {
                el.addEventListener('input', calculateAll);
            });

            // --- THEME TOGGLE ---
            const themeToggle = document.getElementById('theme-toggle');
            const lightIcon = document.getElementById('theme-icon-light');
            const darkIcon = document.getElementById('theme-icon-dark');
            
            const toggleTheme = () => {
                const isDark = document.documentElement.classList.toggle('dark');
                localStorage.theme = isDark ? 'dark' : 'light';
                updateThemeIcons(isDark);
            };
            
            const updateThemeIcons = (isDark) => {
                if (isDark) {
                    lightIcon.classList.add('hidden');
                    darkIcon.classList.remove('hidden');
                } else {
                    lightIcon.classList.remove('hidden');
                    darkIcon.classList.add('hidden');
                }
            };
            
            themeToggle.addEventListener('click', toggleTheme);
            updateThemeIcons(document.documentElement.classList.contains('dark'));
            
            // --- INITIALIZATION ---
            setUnit('metric'); // Initialize with metric system
            calculateAll(); // Perform initial calculation
        });
    </script>
    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
    <script>
        const initParticles = (isDark) => {
            const particleColor = isDark ? "#475569" : "#d1d5db"; // slate-600 for dark, gray-300 for light
            const lineColor = isDark ? "#334155" : "#e5e7eb"; // slate-700 for dark, gray-200 for light
            
            particlesJS('particles-js', {
                "particles": {
                    "number": {"value": 60, "density": {"enable": true, "value_area": 800}},
                    "color": {"value": particleColor},
                    "shape": {"type": "circle"},
                    "opacity": {"value": 0.5, "random": true},
                    "size": {"value": 3, "random": true},
                    "line_linked": {"enable": true, "distance": 150, "color": lineColor, "opacity": 0.4, "width": 1},
                    "move": {"enable": true, "speed": 1, "direction": "none", "random": false, "straight": false, "out_mode": "out", "bounce": false}
                },
                "interactivity": {
                    "detect_on": "canvas",
                    "events": {
                        "onhover": {"enable": true, "mode": "grab"},
                        "onclick": {"enable": false},
                        "resize": true
                    },
                    "modes": {
                        "grab": {"distance": 140, "line_linked": {"opacity": 1}}
                    }
                },
                "retina_detect": true
            });
        };

        const observer = new MutationObserver(mutations => {
            mutations.forEach(mutation => {
                if (mutation.attributeName === "class") {
                    const isDark = document.documentElement.classList.contains('dark');
                    if (window.pJSDom && window.pJSDom[0]) {
                        window.pJSDom[0].pJS.fn.vendors.destroypJS();
                        window.pJSDom.splice(0, 1);
                    }
                    initParticles(isDark);
                }
            });
        });

        observer.observe(document.documentElement, { attributes: true });
        
        document.addEventListener('DOMContentLoaded', () => {
            const isDark = document.documentElement.classList.contains('dark');
            initParticles(isDark);
        });
    </script>
</body>
</html>

